basePath: /
definitions:
  models.AvailableSeatsResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/models.SeatStruct'
        type: array
      message:
        type: string
      status:
        type: string
    type: object
  models.Cast:
    properties:
      id:
        type: integer
      name:
        type: string
    type: object
  models.Cinema:
    properties:
      cinema_location:
        type: string
      cinema_name:
        type: string
    type: object
  models.Genre:
    properties:
      id:
        type: integer
      name:
        type: string
    type: object
  models.Movie:
    properties:
      image:
        type: string
      title:
        type: string
    type: object
  models.MovieDetailResponse:
    properties:
      data:
        $ref: '#/definitions/models.MovieDetailStruct'
      message:
        type: string
      status:
        type: string
    type: object
  models.MovieDetailStruct:
    properties:
      backdrop_path:
        type: string
      cast:
        description: Updated to use the new Cast struct
        items:
          $ref: '#/definitions/models.Cast'
        type: array
      director:
        type: string
      duration:
        type: integer
      genre:
        description: Updated to use the new Genre struct
        items:
          $ref: '#/definitions/models.Genre'
        type: array
      id:
        type: integer
      poster_path:
        type: string
      release_date:
        type: string
      synopsis:
        type: string
      title:
        type: string
    type: object
  models.MovieListResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/models.MovieStruct'
        type: array
      message:
        type: string
      status:
        type: string
    type: object
  models.MovieStruct:
    properties:
      archived_at:
        type: string
      backdrop_path:
        type: string
      casts:
        items:
          type: string
        type: array
      created_at:
        type: string
      director_id:
        type: integer
      director_name:
        type: string
      duration:
        type: integer
      genres:
        items:
          type: string
        type: array
      id:
        type: integer
      popularity:
        type: integer
      poster_path:
        type: string
      release_date:
        type: string
      synopsis:
        type: string
      title:
        type: string
      update_at:
        type: string
    required:
    - casts
    - genres
    type: object
  models.Order:
    properties:
      created_at:
        type: string
      email:
        type: string
      full_name:
        type: string
      id:
        type: integer
      ispaid:
        type: boolean
      payment_method_id:
        type: integer
      phone_number:
        type: string
      schedule_id:
        type: integer
      seats_code:
        items:
          type: string
        type: array
      total_price:
        type: integer
      updated_at:
        type: string
      users_id:
        type: integer
    type: object
  models.OrderHistory:
    properties:
      cinema:
        $ref: '#/definitions/models.Cinema'
      created_at:
        type: string
      is_paid:
        type: boolean
      movie:
        $ref: '#/definitions/models.Movie'
      schedule:
        $ref: '#/definitions/models.Schedule'
      seats:
        items:
          type: string
        type: array
      total_price:
        type: integer
      users_id:
        type: integer
    type: object
  models.OrderHistoryResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/models.OrderHistory'
        type: array
      message:
        type: string
      status:
        type: string
    type: object
  models.PaginatedMovieListResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/models.MovieStruct'
        type: array
      message:
        type: string
      pagination:
        $ref: '#/definitions/models.PaginationInfo'
      status:
        type: string
    type: object
  models.PaginationInfo:
    properties:
      currentPage:
        type: integer
      itemsPerPage:
        type: integer
      totalItems:
        type: integer
      totalPages:
        type: integer
    type: object
  models.PingModel:
    properties:
      contentType:
        example: application/json
        type: string
      message:
        example: pong
        type: string
      requestId:
        example: "123"
        type: string
    type: object
  models.Response:
    properties:
      message:
        type: string
      status:
        type: string
    type: object
  models.ResponseCreateOrder:
    properties:
      data:
        $ref: '#/definitions/models.Order'
      message:
        type: string
      status:
        type: string
    type: object
  models.ResponseSchedule:
    properties:
      data:
        items:
          $ref: '#/definitions/models.ScheduleDetails'
        type: array
      message:
        type: string
      status:
        type: string
    type: object
  models.Schedule:
    properties:
      cinema_id:
        type: integer
      date:
        type: string
      id:
        type: integer
      location:
        type: integer
      movie_id:
        type: integer
      time:
        type: string
      time_id:
        type: integer
    type: object
  models.ScheduleDetails:
    properties:
      cinema_name:
        type: string
      date:
        type: string
      id:
        type: integer
      location:
        type: string
      time:
        type: string
    type: object
  models.SeatStruct:
    properties:
      id:
        type: integer
      seats_code:
        type: string
    type: object
  models.UsersStruct:
    properties:
      email:
        type: string
      id:
        type: integer
      password:
        type: string
      role:
        type: string
    required:
    - email
    - password
    type: object
host: localhost:3000
info:
  contact: {}
  description: RESTful API created using gin for Back-End Tickitz
  title: Back-End Tickitz
  version: "1.0"
paths:
  /admin/movies:
    get:
      consumes:
      - application/json
      description: Retrieves a list of all movies for admin
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.MovieListResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      security:
      - ApiKeyAuth: []
      summary: Get all movies (Admin only)
      tags:
      - Admin
    post:
      consumes:
      - multipart/form-data
      description: Creates a new movie with details, poster, and backdrop
      parameters:
      - description: Movie title
        in: formData
        name: title
        required: true
        type: string
      - description: Movie description
        in: formData
        name: description
        required: true
        type: string
      - description: Release date (YYYY-MM-DD)
        in: formData
        name: release_date
        required: true
        type: string
      - description: Poster image
        in: formData
        name: poster
        required: true
        type: file
      - description: Backdrop image
        in: formData
        name: backdrop
        required: true
        type: file
      - collectionFormat: csv
        description: Genre IDs (comma separated)
        in: formData
        items:
          type: integer
        name: genre_ids
        required: true
        type: array
      - collectionFormat: csv
        description: Cast IDs (comma separated)
        in: formData
        items:
          type: integer
        name: cast_ids
        required: true
        type: array
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      security:
      - ApiKeyAuth: []
      summary: Create a new movie (Admin only)
      tags:
      - Admin
  /admin/movies/{id}:
    patch:
      consumes:
      - multipart/form-data
      description: Updates movie details, poster, and backdrop
      parameters:
      - description: Movie ID
        in: path
        name: id
        required: true
        type: integer
      - description: Movie title
        in: formData
        name: title
        type: string
      - description: Movie description
        in: formData
        name: description
        type: string
      - description: Release date (YYYY-MM-DD)
        in: formData
        name: release_date
        type: string
      - description: Poster image
        in: formData
        name: poster
        type: file
      - description: Backdrop image
        in: formData
        name: backdrop
        type: file
      - collectionFormat: csv
        description: Genre IDs (comma separated)
        in: formData
        items:
          type: integer
        name: genre_ids
        type: array
      - collectionFormat: csv
        description: Cast IDs (comma separated)
        in: formData
        items:
          type: integer
        name: cast_ids
        type: array
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      security:
      - ApiKeyAuth: []
      summary: Update a movie (Admin only)
      tags:
      - Admin
  /logout:
    post:
      description: Logout user by blacklisting the current JWT token in Redis
      produces:
      - application/json
      responses:
        "200":
          description: Logout successful
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Authorization header missing or malformed
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Logout failed due to server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Logout user
      tags:
      - Users
  /movies:
    get:
      consumes:
      - application/json
      description: Retrieves a paginated list of all movies, with optional filters
        by title and genre
      parameters:
      - description: Page number (default 1)
        in: query
        name: page
        type: integer
      - description: Number of items per page (default 10)
        in: query
        name: limit
        type: integer
      - description: Movie title to filter by
        in: query
        name: title
        type: string
      - description: Genre name to filter by
        in: query
        name: genre
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.PaginatedMovieListResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get all movies with pagination and optional filtering
      tags:
      - Movies
  /movies/:movieId:
    get:
      consumes:
      - application/json
      description: Get a single movie's details by its ID
      parameters:
      - description: Movie ID
        in: path
        name: movieId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.MovieDetailResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get movie detail
      tags:
      - Movies
  /movies/popular:
    get:
      consumes:
      - application/json
      description: Get a list of popular movies
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.MovieListResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get popular movies
      tags:
      - Movies
  /movies/upcoming:
    get:
      consumes:
      - application/json
      description: Get a list of upcoming movies
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.MovieListResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get upcoming movies
      tags:
      - Movies
  /orders:
    post:
      consumes:
      - application/json
      description: Create a new movie ticket order
      parameters:
      - description: Order data
        in: body
        name: order
        required: true
        schema:
          $ref: '#/definitions/models.Order'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.ResponseCreateOrder'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Create a new order
      tags:
      - Orders
  /orders/{orderId}:
    get:
      consumes:
      - application/json
      description: Get details of a specific order by its ID
      parameters:
      - description: Order ID
        in: path
        name: orderId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.OrderHistoryResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get order by ID
      tags:
      - Orders
  /orders/history/{userId}:
    get:
      consumes:
      - application/json
      description: Get a list of all orders for a specific user
      parameters:
      - description: User ID
        in: path
        name: userId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.OrderHistoryResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get order history
      tags:
      - Orders
  /ping:
    get:
      parameters:
      - description: Header for requestID
        in: header
        name: X-Request-ID
        required: true
        type: string
      - description: Header for requestID
        in: header
        name: Content-Type
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.PingModel'
      tags:
      - ping
  /ping/:id/:param2:
    get:
      parameters:
      - description: path params for id
        in: path
        name: id
        required: true
        type: integer
      - description: path params for param2
        in: path
        name: param2
        required: true
        type: string
      - description: query for q
        in: query
        name: q
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
      tags:
      - ping
  /schedules:
    get:
      consumes:
      - application/json
      description: Get all available movie schedules
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.ResponseSchedule'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get all schedules
      tags:
      - Schedules
  /seats/:scheduleId/available:
    get:
      consumes:
      - application/json
      description: Get a list of available seats for a specific schedule
      parameters:
      - description: Schedule ID
        in: path
        name: scheduleId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.AvailableSeatsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get available seats
      tags:
      - Seats
  /users/{id}:
    get:
      consumes:
      - application/json
      description: Get user profile by user ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
      summary: Get profile by ID
      tags:
      - Users
    patch:
      consumes:
      - multipart/form-data
      description: Update user profile data including optional profile image and password
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      - description: Full name
        in: formData
        name: fullname
        type: string
      - description: Email
        in: formData
        name: email
        type: string
      - description: New password
        in: formData
        name: password
        type: string
      - description: Old password (required if changing password)
        in: formData
        name: old_password
        type: string
      - description: Profile image file
        in: formData
        name: profile_image
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      security:
      - ApiKeyAuth: []
      summary: Update user profile
      tags:
      - Users
  /users/login:
    post:
      consumes:
      - application/json
      description: Login with email and password
      parameters:
      - description: Input email and password
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/models.UsersStruct'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Login user
      tags:
      - Users
  /users/register:
    post:
      consumes:
      - application/json
      description: Register with email and password for access application
      parameters:
      - description: Input email and password
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/models.UsersStruct'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.Response'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/models.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.Response'
      summary: Register user
      tags:
      - Users
swagger: "2.0"
